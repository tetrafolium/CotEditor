<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="keywords"
      content="シンタックススタイル, ファイルマッピング, ファイル関連付け,  拡張子, シェバン, シバン, インタープリタ"
    />
    <link rel="start" href="../CotEditorHelp.html" />
    <link rel="index" href="../xpgs/xall.html" />
    <link rel="stylesheet" href="../../Shared/sty/standard.css" />
    <title>シンタックススタイルのファイル関連付け</title>
  </head>

  <body>
    <a name="about_file_mapping"></a>

    <nav>
      <ul>
        <li><a href="../CotEditorHelp.html">CotEditor ヘルプ</a></li>
      </ul>
    </nav>

    <h1>シンタックススタイルのファイル関連付け</h1>

    <p>
      ファイルを開いたとき、CotEditor
      は自動でそのファイルの種類を判定して適切なシンタックススタイルを適用します。
    </p>
    <p>
      このとき、どのシンタックススタイルが適用されるかは、各シンタックススタイル定義内で設定された「ファイル関連付け」の情報を元に決定されます。
    </p>

    <h2>ファイル関連付けの優先順位</h2>

    <p>CotEditor は以下の順序で最適なシンタックススタイルを捜査します。</p>

    <ol>
      <li>
        ファイルの拡張子
        <ul>
          <li>ファイルの拡張子から対応するシンタックススタイルを探します。</li>
          <li>例: .html → HTML</li>
          <li>例: .py → Python</li>
        </ul>
      </li>
      <li>
        ファイル名
        <ul>
          <li>
            対応する拡張子がなかったとき、またはファイル名に拡張子がなかったときは、ファイル名全体を元に対応するシンタックススタイルを探します。
          </li>
          <li>例: .htaccess → Apache</li>
          <li>例: makefile → Makefile</li>
        </ul>
      </li>
      <li>
        ファイル内の1行目のシェバン
        <ul>
          <li>
            対応する拡張子・ファイル名がないとき、書類内の最初の行がシェバンであれば、それを手掛かりにシンタックススタイルを探します。この捜査ではシンタックススタイル定義のファイル関連付けの「インタープリタ」の設定が用いられます。シェバンの
            <code>#!</code> 直後のパスの最後の語句、またはパスが
            <code>env</code>
            の場合はその次の語句が、インタープリタ名として検索語句に使用されます。
          </li>
          <li>
            例: <code>#!/usr/bin/perl</code> → Perl (インタープリタ名:
            <code>perl</code>)
          </li>
          <li>
            例: <code>#!/usr/bin/env python3</code> → Python (インタープリタ名:
            <code>python3</code>)
          </li>
        </ul>
      </li>
      <li>
        XML 宣言
        <ul>
          <li>
            対応する拡張子・ファイル名・インタープリタがないとき、ファイル内容が
            XML 宣言で始まっていたら、自動的に “XML” スタイルを適用します。
          </li>
          <li>
            例:
            <code
              >&lt;?xml version=&quot;1.0&quot;
              encoding=&quot;utf-8&quot;?&gt;</code
            >
            → XML
          </li>
        </ul>
      </li>
      <li>
        なし
        <ul>
          <li>
            該当するスタイルが何もないときは、シンタックススタイルは「なし」に設定されます。
          </li>
        </ul>
      </li>
    </ol>

    <p>
      拡張子やファイル名など同じレベルで複数の対応スタイルがあった場合は、バンドルされたプリセットのシンタックススタイルよりもユーザのカスタムスタイルが優先されます。さらにその中でも複数の対応スタイルがあった場合は、自動的に最初に見つかったスタイルを適用します。
    </p>

    <h2>ファイル関連付けのコンフリクト</h2>

    <p>
      バンドルされているシンタックススタイルにファイル関連付けのコンフリクトはありませんが、ユーザが独自にスタイルを追加した場合や、バンドルされているスタイルのファイル関連付けを変更した場合はコンフリクトがおこることがあります。現在ファイル関連付けのコンフリクトが発生しているかどうかは、環境設定の「フォーマット」ペインにある「ファイル関連付けのコンフリクトを表示」から探すことができます。この項目が選択不可能になっているときは、ファイル関連付けのコンフリクトは発生していません。
    </p>

    <p>
      ファイルを期待するスタイルで開くことができているかぎりは、ファイル関連付けのコンフリクトを放置しておいてかまいません。
    </p>

    <section id="cf">
      <h2>関連項目</h2>
      <ul>
        <li>
          <a href="../pgs/howto_customize_syntaxstyle.html"
            >シンタックススタイルを設定する</a
          >
        </li>
        <li><a href="../pgs/pref_format.html">環境設定：フォーマット</a></li>
      </ul>
    </section>
  </body>
</html>
